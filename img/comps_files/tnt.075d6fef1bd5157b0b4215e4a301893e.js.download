function onYouTubeIframeAPIReady(){jQuery(window).load(function(){__tnt.log("Init YT:"),__tnt.youtube.players.init()})}window.__tnt||(window.__tnt={}),__tnt.client=function(t){return this.obj={},this.obj.userAgent=navigator.userAgent.toLowerCase(),this.obj.browser=t["eb.browser"]={version:(this.obj.userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(this.obj.userAgent),opera:/opera/.test(this.obj.userAgent),msie:/msie/.test(this.obj.userAgent)&&!/opera/.test(this.userAgent),mozilla:/mozilla/.test(this.obj.userAgent)&&!/(compatible|webkit)/.test(this.obj.userAgent),silk:/silk/.test(this.obj.userAgent),chrome:/chrome/.test(this.obj.userAgent)},this.obj.platform=t["eb.platform"]={win:/win/.test(this.obj.userAgent),mac:/mac/.test(this.obj.userAgent),touchDevice:function(){try{return"ontouchstart"in document.documentElement}catch(t){return!1}}(),android:this.obj.userAgent.indexOf("android")>-1,ipad:this.obj.userAgent.match(/ipad/i)?!0:!1,iphone:this.obj.userAgent.match(/iphone/i)?!0:!1,ipod:this.obj.userAgent.match(/ipod/i)?!0:!1,winphone:this.obj.userAgent.match(/Windows Phone/i)?!0:!1,blackberry:this.obj.userAgent.match(/BlackBerry/i)?!0:!1,webos:this.obj.userAgent.match(/webOS/i)?!0:!1},this.obj.platform.ios=this.obj.platform.ipad||this.obj.platform.ipod||this.obj.platform.iphone,this.obj.touchOnly=this.obj.platform.touchDevice&&(this.obj.platform.android||this.obj.platform.ios||this.obj.platform.winphone||this.obj.platform.blackberry||this.obj.platform.webos||this.obj.platform.silk),this.obj.clickEvent=this.obj.touchOnly?"touchend":"click",this.obj.capabilities={supportsCookies:navigator.cookieEnabled?!0:!1,supportsLocalStorage:function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}},supportsFlash:function(){}},this.obj}(window),__tnt.user=function(){return this.obj={authToken:Cookies.get("tncms-authtoken"),screenName:TNCMS.User.getScreenName(),avatar:Cookies.get("tncms-avatarurl"),remember:Cookies.get("tncms-rememberme"),services:Cookies.get("tncms-services")},this.obj.loggedIn=TNCMS.User.isLoggedIn(),this.obj}(window),__tnt.log=function(t){window.console&&console.log(t)},__tnt.urlHash=function(t){var e=new RegExp("#.*[?&]"+t+"=([^&]+)(&|$)"),n=location.href.match(e);return n?n[1]:""},__tnt.isAuthor=!1,document.addEventListener("DOMContentLoaded",function(){if(void 0!==document.body.dataset.authors){var t=JSON.parse(document.body.dataset.authors);__tnt.user.loggedIn&&-1!==t.indexOf(__tnt.user.screenName)&&(__tnt.isAuthor=!0)}}),__tnt.trackEventLater=[],__tnt.trackEvent=function(t){"object"===jQuery.type(t)&&__tnt.trackEventLater.push(t)},__tnt.truncateStr=function(t,e,n){return t.length>e&&(n=n?n:"",t=t.substring(0,e)+n),t},__tnt.compareArray=function(t,e){if("undefined"!=typeof t&&"undefined"!=typeof e){"string"==typeof t&&(t=JSON.parse(t));var n=t.filter(function(t){return e.indexOf(t)>-1});return n.length>0}},__tnt.elementOnScreen=function(t,e){if(0===$(t).length)return!1;var n=$(t),o=$(window),e=e?e:5,i=o.scrollTop(),r=i+o.height(),a=n.offset().top-e,s=a+n.height()-e;return r>=a&&s>=i},__tnt.outerHeight=function(t,e){var n,o,i=0;return"string"==typeof t?n=document.querySelector(t):"object"==typeof t&&(n=t),null!==n?(o=n.offsetHeight,e===!0&&(i=parseInt(document.defaultView.getComputedStyle(n,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(n,"").getPropertyValue("margin-bottom"))),o+i):0},__tnt.dmp={},__tnt.dmp.audienceExtracted=function(t){var e=new CustomEvent("tnt-dmp-audience-extracted",{detail:{userAudience:t}});window.dispatchEvent(e),__tnt.client.capabilities.supportsLocalStorage()&&localStorage.getItem("tncms.dmp.audiences")!==JSON.stringify(t)&&localStorage.setItem("tncms.dmp.audiences",JSON.stringify(t))},__tnt.scrubUrl=function(t){if(-1==location.href.indexOf("tncms/admin"))return t;var e,n=location.href.split("/")[3],o="https://www."+n,i=new RegExp("https://admin[-.].*?.(com|net)/"+n,"g");return e="/"==t.charAt(0)&&-1==t.indexOf("/"+n+"/tncms/admin/action/main/preview/site")||1==/^https:\/\/admin[\-\.].*?\.(com|net)/.test(t)&&-1==t.indexOf("/shared-content/")&&0==i.test(t)?"/"+n+"/tncms/admin/action/main/preview/site/-"+t.replace(/https:\/\/admin[\-\.].*?\.(com|net)/,""):0==t.indexOf("http://www."+n)?"/"+n+"/tncms/admin/action/main/preview/site/-"+t.replace("http://www."+n,""):0==t.indexOf(o)?"/"+n+"/tncms/admin/action/main/preview/site/-"+t.replace(o,""):t},__tnt.template=function(t,n,o,r,s){var c="";if(t)if("undefined"==typeof o&&(o=!1),"TEMPLATE"==t.nodeName){if("content"in document.createElement("template"))c=document.importNode(t.content,!0);else{c=document.createDocumentFragment();var u=t.childNodes;for(i=0;i<u.length;i++)c.appendChild(u[i].cloneNode(!0))}Array.isArray(r)&&r.forEach(function(t){var n=c;if(t&&(n=c.querySelectorAll(t.element),t.first&&(n=n.slice(0,1))),n){if(t.attr)for(a=0;a<t.attr.length;a++)for(e=0;e<n.length;e++)n[e].setAttribute(t.attr[a].attr,t.attr[a].value);if(t.html)for(i=0;i<n.length;i++)n[i].innerHTML=t.html}}),"function"==typeof s&&s(c),n&&(o?n.insertBefore(c,n.firstChild):n.appendChild(c))}else __tnt.log("__tnt.template - no valid template element found - update to use template tag");else __tnt.log("__tnt.template - no template element found");return c},__tnt.youtube=function(){return o={},o.create=[],o.playing=!1,o.state={change:function(t){switch(t.data){case YT.PlayerState.ENDED:__tnt.trackEvent({category:"video",action:"end",label:"youtube",value:"1"});break;case YT.PlayerState.PLAYING:t.target!=o.playing&&o.state.pause(),o.playing=t.target,__tnt.trackEvent({category:"video",action:"play",label:"youtube",value:"1"});break;case YT.PlayerState.PAUSED:__tnt.trackEvent({category:"video",action:"pause",label:"youtube",value:"1"})}},pause:function(){o.playing&&o.playing.pauseVideo()}},o.players={register:function(t){if(0===o.create.length){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}o.create.push(t)},init:function(){o.create.length>0&&(__tnt.log("  Players:"),$.each(o.create,function(t,e){__tnt.log("    "+e),new YT.Player(e,{events:{onStateChange:o.state.change}})}))}},o}(window);
//# sourceMappingURL=tnt.075d6fef1bd5157b0b4215e4a301893e.js.map